# For more Python information and examples, see
# https://docs.semaphoreci.com/article/83-language-python
version: v1.0
name: Build publish package
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Run tests
    task:
      prologue:
        commands:
          - checkout
          - sudo pip install tox
          - cache restore
      jobs:
        - name: Tests in Python 2.7
          commands:
            - tox -e py27
        - name: Tests in Python 3.5
          commands:
            - tox -e py35
        - name: Tests in Python 3.6
          commands:
            - tox -e py36
        - name: Tests in Python 3.7
          commands:
            - tox -e py37
        - name: Gather coverage data
          commands:
            - tox -e coverage
      epilogue:
        commands:
          - cache store
